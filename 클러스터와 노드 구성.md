### 클러스터와 노드 구성

#### HTTP 계층과 전송 계층

엘라스틱서치의 클러스터는 여러개의 노드로 이뤄져있고 노드들은 서로 통신하면서 클러스터를 구성하고 있다. 노드는 두가지 통신 모듈이 있는데 HTTP 모듈과 전송 모듈이다. 

| 통신 모듈 | 특징                                                         |
| --------- | ------------------------------------------------------------ |
| HTTP 모듈 | - 엘라스틱 API에서 제공하는 형태로 외부 클라이언트 앱과 통신 시 사용함 </br> - 기본 포트 : 9200~9299 |
| 전송 모듈 | - 클러스터 내부 모듈 간의 통신에 사용함 </br> - 기본 포트 : 9300~9399 |

#### 노드

노드는 엘라스틱서치 클러스터를 구성하는 하나의 인스턴스다. 일반적으로 하나의 논리적인 서버로 구성되어 데이터를 저장하고 클러스터의 인덱싱과 검색 기능에 참여한다. 물리적인 서버 하나에 노드 하나를 구성하는 방식이 권장되지만, 단일 서버에 복수의 노드를 설치할 수도 있다. 

##### 마스터 노드

클러스터는 반드시 마스터 노드 하나를 가져야 한다. 마스터 노드는 인덱스의 설정, 매핑 정보와 물리적 위치, 이 외에도 클러스터 설정 정보나 인덱스 탬플릿 정보 등 클러스터의 모든 상태 정보를 관리한다. 또한 각 노드들과 통신하면서 클러스터의 변화를 모니터링한다. 즉 마스터 노드는 클러스터를 유지하는데 없어선 안 되는 역할을 한다. 사용자는 마스터 노드를 직접 지정할 수 없고 마스터 후보 노드만 지정할 수 있다. 

###### 마스터 노드 선출 과정

마스터 후보 노드 중 과반이 넘는 표를 받은 노드가 마스터 노드로 선출된다.

이때 
